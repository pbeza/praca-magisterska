/** \file
 * Common configuration for both server and client.
 */
#ifndef _COMMON_CONFIG_H
#define _COMMON_CONFIG_H

#include <stdint.h>

/**
 * Processor architecture (eg. `x86_64`).
 */
#define HOST_SYSTEM_PROCESSOR		"@CMAKE_HOST_SYSTEM_PROCESSOR@"

/**
 * Short version of the license.
 */
#define COPYRIGHT			"Copyright (C) 2016 @AUTHOR@."\
					"\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>."\
					"\nThis is free software: you are free to change and redistribute it."\
					"\nThere is NO WARRANTY, to the extent permitted by law.\n"

/**
 * Author of the project.
 */
#cmakedefine AUTHOR			"@AUTHOR@"

/**
 * If `CMAKE_BUILD_TYPE=Debug`, then `DEBUG` is defined. Useful for eg. defining
 * function printing debug messages.
 */
#cmakedefine DEBUG

/**
 * Message about lack of support for long options in `argv` when POSIX
 * compliance is required.
 */
#ifdef POSIXLY_CORRECT
#define POSIXLY_CORRECT_LONG_OPTIONS_MSG"Note: Long options are not supported in this build.\n"
#else
#define POSIXLY_CORRECT_LONG_OPTIONS_MSG
#endif

/**
 * Common ending of the help section.
 */
#define HELP_POSTFIX			POSIXLY_CORRECT_LONG_OPTIONS_MSG "\nReport bugs to: <@AUTHOR_EMAIL@>.\n"

/**
 * Common settings for client and server.
 */
typedef struct common_config_t {
	/**
	 * Selected runtime options are represented by single bits set to 1.
	 */
	uint32_t selected_options;
	/**
	 * Server's listening port. Client uses this port to connect to server.
	 */
	uint16_t port;
} common_config_t;

#endif
