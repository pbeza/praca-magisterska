% MYSCM-SRV(1) myscm-srv User Manuals
% Patryk Bęza
% July 4, 2017

# NAME

myscm-srv - server side of the mySCM application managing software and
configuration of the GNU/Linux workstations.

mySCM is simple Software Configuration Management (SCM) tool for managing
software and configuration of the clients running GNU/Linux distributions.
This application is intended to create and customize GNU/Linux system image
that can be applied by the clients running `myscm-cli` application.

# SYNOPSIS

myscm-srv.py [*OPTIONS*] [**--scan**] [**--gen-img** *CLIENT_AIDE_DB_VER*]

# DESCRIPTION

This is (yet another) Software Configuration Management (SCM) tool that allows
automation of distributing similar software to multiple clients.  This
application significantly differs from major existing solutions (e.g. Puppet,
Chef, Ansible and Salt) in a way of using it.  Instead of writing complex
configuration, which describes in great detail the expected state of the client
system, administrator can just configure reference machine in a way he wants to
configure clients' machines, run `myscm-srv` and apply changes on clients'
machines by cloning reference system image and applying it on them using
`myscm-cli` application.

This application is briefly referred as a `server`, but its primary role is to
create and customize GNU/Linux system image that can be applied by client's
`myscm-cli` application, which modifies client's system configuration to match
server's reference configuration, NOT to share the created system image with
the clients as its name may suggest.  Sharing system image generated by this
application is handled by `myscm-cli` application using peer-to-peer
connection. Therefore myscm-srv should be referred as a master or reference
system rather than server.

Reference system image is archive file that contains all of the information
needed to modify clients' configuration and software to make them clones of the
`server` system (in scope described in `myscm-srv` configuration; see
`--aide-conf` option).

# OPTIONS

-a *PATH*, \--aide-conf=*PATH*
:   Specify AIDE configuration file path.  This file determines which
    directories of the server's system are scanned and synchronized with the
    client's system.  If not specified `/etc/myscm-srv/aide.conf` AIDE
    configuration file is read by default.

-c *FILE*, \--config=*FILE*
:   Read configuration from specified *FILE* instead of default `config.ini`
    file.

-k, \--config-check
:   Check if application configuration is valid.  If it is valid, then exit
    status is 0  (see `$?` variable).  Otherwise 1.  Both AIDE configuration
    (see `--aide-conf`) and `myscm-srv` validity (see `--config`) are checked.

-l, \--list
:   List all available AIDE databases created with `--scan` option.  Every line
    of the output is single full path to the respective aide.db[.X] AIDE
    database.  Location where aide.db[.X] files are saved is specified by AIDE
    configuration, specifically by `database` variable read from file specified
    by `--aide-conf` option or from `/etc/myscm-srv/aide.conf` if this option
    is not present.

-s, \--scan
:   Scan system using AIDE, create AIDE's new `aide.db` reference database and
    rename old one to `aide.db.X` where `X` is incremented integer that is
    referred as `CLIENT_AIDE_DB_VER` in `--gen-img` option.  This operation is
    intended to provide AIDE database with a summary of the current state of
    the server software without deleting the old state file.  Scanning may take
    a long time to complete depending on the AIDE configuration file that
    determines which directories are scanned (see `--aide-conf` option for
    details).

-g *CLIENT_AIDE_DB_VER*, \--gen-img=*CLIENT_AIDE_DB_VER*
:   Generate system image that can be applied by any client whose system
    configuration is represented by existing AIDE database identified by
    non-negative integer number `CLIENT_AIDE_DB_VER` which corresponds to `X`
    in `aide.db.X` file created with `--scan` flag.  Generated system image is
    an archive file saved in location specified in configuration file (in
    `/var/lib/myscm-srv/` by default).  System image contains all of the files
    necessary to modify client's configuration to match server's configuration.
    If client has never synchronized its configuration with server, then `0`
    should be specified as a `CLIENT_AIDE_DB_VER`.  Client application
    (ie. `myscm-cli`) has option that prints out client's current
    `CLIENT_AIDE_DB_VER`.

\--ssl-cert=*PATH*
:   Specify full path to the server's SSL certificate that is used to digitally
    sign system image generated with `--gen-img option`.  If this option is not
    present, then default path `/etc/myscm-srv/ssl.sig` is used.

-t SEC, \--time-prop=*SEC*
:   Specify time interval in seconds between sending configuration to clients
    (minimum `3`, maximum `315360000` seconds).  Default value is `3600` sec.

-v, \--verbose
:   Increase output and log verbosity. Default value is `0`.

-h, \--help
:   Show help message (which is short version of this manual page) and exit.

\--version
:   Print version information and exit.

# EXIT STATUS

If no error occurred the exit status is `0`.  Otherwise `1` is returned.

# COPYRIGHT

Copyright © 2017 Patryk Bęza  
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.  
This is free software: you are free to change and redistribute it.  
There is NO WARRANTY, to the extent permitted by law.

# BUGS

Email bug reports to the bug-reporting address <bezap@student.mini.pw.edu.pl>.  For now, no bug tracker is available.

# SEE ALSO

`myscm-cli` (1).

You can learn more details about mySCM software from project white paper.  The
myscm-srv source code and all documentation may be downloaded from GitHub
repository of the project <https://github.com/pbeza/myscm>.

# NOTES

This software is part of the master thesis project.  To learn more about this
implementation, refer to project white paper.
