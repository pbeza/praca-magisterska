\documentclass{mini}

% Paczki do dołączenia oświadczenia o samodzielności wykonania pracy

\usepackage{subfiles}
\usepackage{pdfpages}

% Podstawowe (meta)dane

\title{Protokół zarządzania stacjami komputerowymi pod~kontrolą systemu Linux}
\titleaux{Management Protocol for Linux Workstations}
\author{\href{mailto:P.Beza@student.mini.pw.edu.pl}{Patryk Bęza}}
\album{237533}
\supervisoremail{M.Kozlowski@mini.pw.edu.pl}
\supervisor{\href{mailto:M.Kozlowski@mini.pw.edu.pl}{dr inż. Marek Kozłowski}}
\discipline{Informatyka}
\specialization{Metody Sztucznej Inteligencji}
\monthyear{2017}
\date{\today}

% Wspólna numeracja dla obrazków, tabel
% https://tex.stackexchange.com/questions/145546/how-to-make-figure-and-listing-share-their-counter

\makeatletter
\AtBeginDocument{%
	\let\c@figure\c@lstlisting
	\let\thefigure\thelstlisting
	\let\c@table\c@lstlisting
	\let\thetable\thelstlisting
	\let\ftype@lstlisting\ftype@figure % give the floats the same precedence
	\let\ftype@table\ftype@figure % give the floats the same precedence
}
\makeatother

\glsdisablehyper

% Właściwy początek dokumentu

\begin{document}

% Wyłączenie numeracji stron w spisie treści

\pagenumbering{gobble}

% Strona tytułowa + podpisy autora i Promotora na odwrocie
% Strona tytułowa ma mniejsze marginesy żeby dostosować się do wzorca Rektora

\newgeometry{inner=20mm,outer=20mm,top=25mm,bottom=25mm,bindingoffset=5mm}
\maketitle
\restoregeometry

% Strona z informacjami o Wydziale i autorze

\include{chapters/infopage}

% Spis treści

\tableofcontents

% Słownik pojęć

\include{glossary}
%\pagenumbering{roman}

% Zakaz dzielenia wybranych słów (szczególnie angielskich)

\input{chapters/hypenation}

% Stałe dla całej pracy

\input{chapters/constants}

% Lista słów kluczowych

\newcommand{\keywordslist}{\href{https://en.wikipedia.org/wiki/Software_configuration_management}{Software Configuration Management~(SCM)}, \href{https://en.wikipedia.org/wiki/Infrastructure_as_Code}{Infrastructure as Code~(IaC)}, \href{https://en.wikipedia.org/wiki/Linux}{Linux}, \href{https://en.wikipedia.org/wiki/Communications_protocol}{Communications Protocol}}

% Streszczenie pracy po polsku i angielsku (abstract)

\subfile{chapters/abstract-pl}
\subfile{chapters/abstract-eng}

% Wszystkie rozdziały pracy magisterskiej

\pagenumbering{arabic}
\subfile{chapters/ch00-wstep}
\subfile{chapters/ch01-istniejace-rozwiazania}
\subfile{chapters/ch02-protokol}
\subfile{chapters/ch03-implementacja}
\addtocontents{toc}{\protect\newpage}  % see: https://tex.stackexchange.com/questions/17071/how-can-i-force-toc-not-to-end-with-a-chapter
\subfile{chapters/ch04-testy}
\subfile{chapters/ch05-podsumowanie}
\subfile{chapters/appendix}

% Lista rysunków i tablic na jednej stronie A4
% https://tex.stackexchange.com/questions/14510/how-to-show-listoffigures-and-listoftables-on-one-page-and-in-the-toc

\renewcommand{\listtablename}{Spis tabel}
\listoffigures
%\begingroup % odkomentuj jeśli wszystko ma być na 1 stronie
%\let\clearpage\relax
\listoftables
%\endgroup

% No pagebreak in bibliography entry.
% https://tex.stackexchange.com/questions/43260/biblatex-no-pagebreak-in-bibliography-entry
\patchcmd{\bibsetup}{\interlinepenalty=5000}{\interlinepenalty=10000}{}{}

\printbibheading
\printbibliography[
    nottype=online,
    nottype=report,
    nottype=misc,
    title={Książki i~publikacje},
    heading=subbibliography
]
\printbibliography[
    type=report,
    title={Dokumenty RFC},
    heading=subbibliography
]
\printbibliography[
    type=online,
    title={Strony internetowe},
    heading=subbibliography
]
\printbibliography[
    type=misc,
    title={Pozostałe},
    heading=subbibliography
]
%\printbibliography[title={Książki},type=book]
\label{bibliography-page}

% Oświadczenie o samodzielności wykonania pracy

%\includepdf[pages=1-,pagecommand={\thispagestyle{plain}},addtotoc={1,chapter,1,Oświadczenie,oswiadczenie-label}]{statement}
\includepdf[pages=1-,pagecommand={\thispagestyle{plain}}]{statement}

\end{document}
