/**
 * @file
 * Server's configuration - both precompiled and parsed from `argv`.
 */

#ifndef _CONFIG_H
#define _CONFIG_H

#include <stdint.h>

#include "common/utils/common_config.h"

/**
 * Project name populated from CMake file.
 */
#define PROJECT_NAME			"@PROJECT_NAME@"

/**
 * Project version number populated from CMake file.
 */
#define PROJECT_VERSION			"@PROJECT_VERSION@"

/**
 * If user didn't specify listening port, this port is used for listening.
 *
 * \note See list of (un)assigned ports:
 * https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt
 */
#define DEFAULT_SERVER_LISTENING_PORT	4440

#define MIN_PORT_NUMBER			1025

#define MAX_PORT_NUMBER			65535

/**
 * Application configuration - both precompiled and parsed from `argv`.
 */
typedef struct config_t {
	/**
	 * Selected runtime options are represented by single bits set to 1.
	 */
	uint32_t selected_options;
	/**
	 * Server's listening port.
	 */
	uint16_t port;
} config_t;

/**
 * Precompiled  application configuration ie. configuration before parsing `argv`.
 */
static const config_t INIT_CONFIG = {
	.selected_options = 0,
	.port = DEFAULT_SERVER_LISTENING_PORT
};

#endif
